# 如何使用加密软件以及如何利用加密软件保证信息安全（持续更新中）

## 为什么写这篇文章？

在网上看到很多有关加密软件的使用教程，可不是使用复杂的命令行界面就是从像普通的软件一样介绍一下安装到使用，也很少提具体如何操作能够保证信息安全。所以我决定写一篇文章，从扫盲最基本的加密原理开始一步一步的带读者了解我们应该如何**正确地**操作加密软件来保证我们的信息安全。同时会介绍一些具体可行的实践方法。

## 为什么要保证信息安全？

你这可真难住我了，加密的好处有很多，但我一时说不出来，以后慢慢补充。

## 看这篇文章，我需要什么基础知识？

这篇文章的写作目的是为了更广泛的传播加密技术以及它们所带来的好处，我会尽量使用非专业的，直觉化的语言和示例，所以并不需要你有**任何**计算机专业相关的知识。我可以保证这篇文章所使用的软件都是具有图形用户界面的，你**完全**不需要接触哪怕一行命令行操作。同样所涉及的软件尽量都是中文。我的目的是，只要你能够有义务教育毕业的学习能力，你就可以通过这篇文章来初步让你从光着身子从互联网游荡的状态走到有那么两件衣服的状态。

## 那我需要什么其他准备吗？

你需要会使用Windows和Android，我的教程都是基于这两个操作系统的。Mac OS和iOS的教程我或许会写，但这两个系统我不了解，所以不会很优先。而Linux则**没有**计划来写教程，请使用Linux操作系统的用户自行阅读manual或去搜索，如果你*不会*这两项技能请把你的操作系统换回Windows。

### 下面列出本文中将会使用的软件

#### Windows

1. gpg4win
2. VeraCrypt
3. EncFSMP
4. 7-zip

#### Android

1. OpenKeychain
2. oversec
3. Mixplorer

#### Mac OS

1. 暂无，待补充

#### iOS

1. 暂无，待补充

## 什么是加密？

顾名思义，加密就是将大家都可以直接读懂的信息变为只有你和你希望读懂的人才能够读懂的信息。[这里]([https://zh.wikipedia.org/wiki/%E5%8A%A0%E5%AF%86](https://zh.wikipedia.org/wiki/加密))有维基百科的关于加密的定义。而研究加密的学问就是**密码学**。而从古典的加密到现代的密码学，加密的方法也多次变化，原理也越来越高深，现代密码学的原理早已经不是人们直觉能够想象到的了。所以在普及加密技术之前，我要先从最古老的加密方法开始，向各位扫盲一些直觉化的错误认知。

那么在讨论加密之前，我们先了解几个密码学中最基础的概念。

- 明文：明文没有被加密，谁都能读懂，如果是文章就是普通的文章。
- 密文：由明文经过加密算法变换成的无法读懂的文字
- 加密算法：某种特定的明文到密文的变换手段

#### 最古老的加密算法：凯撒密码

对历史有所了解的人应该都知道凯撒密码的存在。凯撒密码把   **明文**中的所有字母都按照一个固定的间隔向前（或向后）偏移（ 例如 a变d，b变e ... w变z，x变a）得到了**密文**，这样一眼看上去就很难读懂，需要知道这个方法并且知道偏移的人才能解密。这就是一种最简单也是最广为人知的加密算法。这给人一种关于现代加密的错觉：设计一个加密算法的人肯定也能解密，毕竟只要你知道这种方法，很轻易地（最多尝试25次）就可以得到明文。**但现代密码学不存在这种问题**，下面我们来讨论一下原因。

#### 凯撒密码的魔改汉化版

凯撒密码过于简单，而且对中文的使用者也不友好，毕竟都变成拼音也很难读懂。所以就让我们来设计一个适合于中国人用的凯撒密码升级版，我们就叫它~~刘奭密码~~吧~~（都是皇帝对不对）~~。首先我们找到一本新华字典，为了方便计算，假设这本字典有3000字，只用其中的单字，同时不考虑标点符号的加密，同样的使用凯撒密码的偏移方法，把汉字循环偏移一个特定的值得到密文。一本字典不仅保证了偏移的量可以足够大，你的绝大多数话也可以直接加密而不需要转换。这时你可能会想：新华字典到处都有，即使偏移很多面对一秒钟可以成千上万次的计算机，几千次不过一瞬间的事，而且这个偏移量一旦小了点读音都是相似的，一读就露馅了。

你的考虑是对的，所以我们再修改一下做法。

#### 字符替换密码

还是这本字典，但我们把它里面的单字都取出来，打乱顺序并写进一张纸。这个东西叫做**密码本**，是现代密码学的核心。同样的按顺序把字典里的字再拿出来和你的密码表放在一起。再写字需要加密的时候，我们就把每一个字依照字典顺序到你的顺序替换，同样的，解密则是从你的表中逆向地一一对应到原字符。具体操作如下表：

| 阿   | 啊   | 哀   | 唉   | 挨   | 矮   | 爱   | ...  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| 叫|就|肆|的|发|霍|呃|...|



此时如果你需要加密“阿爱”，经过这个密码表转换以后便是“就呃”，解密只需要反过来即可。即使知道是使用某种一对一的替换并且使用计算机进行暴力破解，也有大约3000!次的运算，破解的难度要比上面的加密算法强得多。而对于拥有密码本的你来说，解密只不过是从使用密码本进行一对一的替换罢了。这是现代密码学的根基：**加密算法的安全性在于密码本的安全性，算法甚至可以是公开的。**而之后的讨论中我们会证明：**公开的算法是优于不公开的算法的。**

### 为什么这些自己造的加密算法不能使用呢？

看起来字符替换密码似乎很安全了，没有这个密码本的人也很难破解。确实，针对绝大多数的一般人，这样的字符替换密码已经无法破解，你的文字已经很安全了。可仍然有两个问题：

- 我还有图片视频等等不是文字的东西，怎么加密？

  对于这个方面我们可以采取**编码**的方法，通过编码我们可以将图片转换成可以被加密的文字，然后进行加解密。作为最简单的编码方式我们可以直接用自然语言描述一张图片：这是一张比基尼海滩的照片，我在这张照片的中上部，照片里还有……

  当然这种**有损**的编码方式并不适合加密，你肯定不希望你的照片到了对方手里只能让对方脑补照片里有什么。不过人脑能力有限，光是三千多个汉字的密码本就很困难了，更别说把图片中的信息丝毫不漏的用语言描述了。幸运的是，现代计算机可以自动帮你完成这些事情：你的图片加密前和解密后一模一样，而无需担心加密会影响质量。这篇文章的后面我们会讨论什么是编码以及我们该如何利用编码。

- 面对高级的攻击者，这种方式很无力。（这个密码只要是个解密爱好者就能破解，更别提专业的破解团队了。）

为什么这种加密方式面对高级的攻击者很无力？我们先从攻击手段的分类开始说起。依照攻击者获取的信息的程度，攻击手段有如下几种：

- 唯密文攻击

  唯密文攻击中攻击者只有加密后的密文，而明文和密码本都是未知的。它需要对你的密文进行分析然后找出一定的规律，从规律中尝试复现你的密码本，最终破解你的加密。

  不幸的是，上述的字符串替换加密仅仅是唯密文攻击就能破解，只要获取足够多的密文进行[频率分析]([https://zh.wikipedia.org/wiki/%E9%A2%91%E7%8E%87%E5%88%86%E6%9E%90](https://zh.wikipedia.org/wiki/频率分析))就可以轻易地找到如同“的”，“我”，“个”之类的常用字，然后基于这些常用字，很快就可以推演出其他密文字所对应的明文字，你的加密便被轻易地摧毁了。

- 已知明文攻击

  已知明文攻击则是攻击者能获取到一部分明文，并且知道了它所对应密文，在此基础上对你的加密进行破解。在上述的字符替换密码中，假如你为了安全，你的密码本每天都随身携带，可攻击者潜入了你的家中盗取了你用明文写好的信和对应的密文，有了这些，攻击者就能更轻松地推算出你的密码本，本来就摇摇欲坠的加密方法最终成为了他人的笑话。

- 选择明文攻击

  攻击进行到这里，字符替换加密已经是攻击者都不屑于看一眼的东西了。能够进行选择明文攻击的攻击者拥有对加密过程的掌控权限，他可以任意地构造他想要的明文，并能够将其转化为对应的密文。如此一来古典密码全军覆没，只要能够进行足够多的选择明文攻击，你的密码本就轻易的被人推算出来了。

- 选择密文攻击

  如果攻击者能够进行选择密文攻击，那么你能够想象出来的**任何**加密和解密是基于**同一个密码本**的操作和逆向操作的加密方法都会失效，因为这些方式已经不再具有意义 --- 攻击者已经可以破解**任何**加密过后的消息了，你的所有消息已再无安全可言了。但是如今，我们还有不是基于同一个密码本的加密算法，非对称加密，这些我们下面再聊。

### 说了这么多，那什么加密算法才靠谱呢？

我之所以提到这么多加密方法与复杂的破解手段，是因为我最大的目的是想向读者们说明：**自己设计的加密算法不靠谱。**读者可以自己想一想，如果你是加密算法的设计者，你要怎么设计加密算法才能抵挡住前三种攻击呢？我相信在读这篇文章的各位既不是加密学的天才也不是专家，仅仅由一个人用几个小时一拍脑子就想出来的算法一定漏洞百出甚至无法使用。但感谢伟大的数学家以及计算机科学家，他们为我们设计出了优秀的加密算法，足以抵抗目前已知的所有攻击手段。那么，为了**安全地**使用这些加密算法，让我们来学习一些最基本的加密知识吧。

## 编码：电脑如何记忆文字

在之前的自造加密算法中，我们把汉字做成密码表并依据密码表来进行加解密，这些是由我们的手和大脑完成的，那么既然我们要使用电脑加密，自然就会有一个问题：电脑怎么记住我写了什么？

大家无论使用中文输入法还是语音输入，似乎电脑能显示文字是本该如此的，可是电脑内部是怎么存储文字的呢？也是将这些文字缩小很多很多然后藏在某个地方的吗？聪明的读者应该会想到：大概并非如此，如果电脑直接把这些字原样存了进去，为什么图片里的字不能复制呢？当然对电脑有所了解的读者自然明白：确实并非如此。接下来就让我们了解一下电脑是怎么存储信息的：也就是数据编码。

### 自己设计一个适用于人类的编码方式

还是这本新华字典，你很爱护这本书，经过了多次的翻查之后还没被你翻烂。然而你遇到了困境，你和小明的联系方式居然只剩一个数字小键盘了！你不能给小明写信来交流了，你们只能用这个小键盘来进行“数字化通讯”了。但你想起你早已和小明约定过一个并不那么靠谱的加密方式：利用字典的页码和字的位置来通信，243 4 代表的就是243页的第4个汉字，本以为这种古老的加密方式很容易被破解，没想到却在这个时候派上了用场。聪明的你立刻使用这种方式试图联系小明，小明也很聪明，立刻理解了这种方式并给你回了消息 - 我一切安好，不用担心。这之后，你们还规定了，连着按10个0是开始，十个9是结束，十个一是重复刚才的一句话，你们之间又能建立起稳定的对话了。

在这个过程中，你将汉字转化为了数字并进行交流，实现了只靠数字就能好好交流。而电脑也采取了这种方式，只不过电脑的计算速度要比你翻字典快多了，也因此，电脑可以将**任何**消息转化为数字。

### 电脑怎么操作的？

在了解电脑怎么做之前，我们要知道：普通人都是从1开始数的，**电脑都是从0开始数的**，这和一般人的计数方式并不一样。

#### 电脑的数学力：我超强的！

电脑可以把它见到的一切东西变为数字，可变成的是什么样的数字呢？现代的电脑在这上面都没有区别：最终变成的是一串连续的数字序列，每个数最大是255。而在现代的电脑中，每次至少会读写一个0-255的数字，总共有256个不同的数字。在电脑看来，可能是下面这样：

14，54，86，0，164，56，255，231，24，172，...

为什么是255，相信有计算机基础的人马上就能理解；但如果你没有，也不必感到为难，这个数字在将来并没有什么用处。如果你想看这是怎么来的，请继续往下看，如果不想也没关系，请直接跳到下一节。

**这里是个坑，以后再填**

#### 最通用的文字编码：ASCII 美国信息交换标准代码

电脑是美国人第一个发明的，最先支持美国的文字自然是理所当然。而美国人为电脑设计了这么一套编码格式，除了26个英文字母大小写10个数字和一部分特殊符号外，还有一些人类不能直接读的**控制字符**，这些控制字符如同上面的十个0，并不是用来表达文字，而是用来表达特定的含义。这些字符总共由128个，每个字符都会变成一个0-127的数字存入电脑。ASCII是现存最古老的编码方式，也是唯一一个无论任何系统都支持的编码方式。

有读者也许会问：可是电脑一次至少读255，这样岂不是浪费了一半的数字没有编码吗？这和当时的条件有关系，当时电脑不是很稳定，经常容易出错，为了能及时发现错误，干脆把一半的数字都标记为错误的，这样当检查到错误的数字就重新来过，避免一错再错。这可以大大地**降低**错误出现的概率（注意：*不是消除*）。当然现在的电脑很稳定了，纠错所需要占用的空间也小了很多。

#### 还原编码：解码

美国用ASCII将文字编码为计算机内部的数字后，要怎么得到文字呢？最早期使用打字机将字符一个一个打印出来，打字机每打一个字便向右走一格，走到边界就回到开始并将纸伸出去一点以便打印下一行。而*控制字符*则是用来控制打字机的动作的，比如退格就是向左走一格，回车就是向左走到头，换行就是用将纸伸出去一点。这样的字符还有很多，用来发出各种特殊指令（而不是直接打印出字符）。

现在的电脑则是存储一个表，每个数字对应着一个字的图片（并**不**准确），每当需要显示文字的时候只需要把对应的图片显示出来即可。在这种方式下，即使是特殊的控制字符也可以用和文字不冲突的图片所显示。

#### 可中文怎么办呢？

中文也要存进电脑啊，不然我们是怎么打出中文的呢？可是电脑一次只能读256个数字，中文可远不止这点。但这难不倒计算机科学家们，一个不行用两个不就好了，这样不就有256*256=65536个字了？中国的设计师与计算机科学家们为中文设计了一种编码 -- GB2312码。足够容纳所有的中文汉字了。同样地，日本、韩国、台湾也都各自设计出了适用于日文、韩文、繁体中文的编码。

#### 不，这一点也不国际化！

是的，想必读者们或多或少见过乱码的情况，这就是编码的方式与解码的方式不同所导致的问题。我们迫切的需要一个无论任何国家任何语言都可以友好交流的编码方式。而在1991年诞生的Unicode则致力于解决这个问题，它使用最多4个数字来代表一个字符，理论可以容纳42亿多的字符（实际上少得多），绝对能包含人类所有可能的语言，妈妈再也不用担心我和国际友人交流了！而如今我们通用的是UTF-8编码，是Unicode中最常用的一种，同样也可以一个编码格式通吃所有语言。

#### 那图片视频音频呢？

同样的也是用0-255这样的数字进行编码，只不过方法比文字复杂的多，伟大的数学家们从真实的世界中提取这些信息的数学特征，最终通过复杂~~(也就是说了你也不懂）~~的方式以数字序列的方式存储在计算机中了。

### 终于进入正题了！

## 电脑怎么加密？

电脑的加密的核心方法也是数字的替换，但以256位的AES为例，它是将32个0-255这样的数字合并起来一起做这样一个密码本的。这时你可以计算一下，这个密码本有多大呢？它有256^32^=1.15*10^77^这么大，即使是容量比纸张大得多的电脑也不可能放下这么多对应关系，那怎么办？数学家们同样的帮我们想到了答案：使用一种特定的函数，将对应关系从存储中查找变成直接计算出来。例如上面的凯撒密码，你可以抽象的把他表示为`密文=明文 + 偏移量`，这样你就不用像真的凯撒大帝一样还用两个竹筒通过旋转才能得到明文。



